<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1668px" preserveAspectRatio="none" style="width:3906px;height:1668px;background:#FFFFFF;" version="1.1" viewBox="0 0 3906 1668" width="3906px" zoomAndPan="magnify"><defs><filter height="300%" id="f14az5zietu1gt" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="1465.2813" style="stroke:#A80036;stroke-width:1.0;" width="10" x="44.5" y="99.6094"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="261.5" y="121.9609"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="107.3125" style="stroke:#A80036;stroke-width:1.0;" width="10" x="261.5" y="182.6641"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="1244.5625" style="stroke:#A80036;stroke-width:1.0;" width="10" x="261.5" y="320.3281"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="560.5" y="213.0156"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="1191.8594" style="stroke:#A80036;stroke-width:1.0;" width="10" x="560.5" y="350.6797"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="861.5" y="441.3828"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="1025.8047" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1014" y="501.7344"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="35.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1019" y="682.75"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="252.4063" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1019" y="772.7109"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1024" y="997.1172"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="457.0703" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1019" y="1070.4688"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1024" y="1432.1875"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1321" y="381.0313"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1321" y="868.4141"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1480" y="597.7891"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="211.4063" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2303" y="1105.8203"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2857" y="808.0625"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2857" y="1136.1719"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2857" y="1196.5234"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2996" y="1256.875"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="3145.5" y="928.7656"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="3145.5" y="1363.8359"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="3272" y="1497.5391"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="1018.8047" style="stroke:#000000;stroke-width:2.0;" width="2407.5" x="930.5" y="516.7344"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="49" x2="49" y1="89.6094" y2="1582.8906"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="266.5" x2="266.5" y1="89.6094" y2="1582.8906"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="565.5" x2="565.5" y1="89.6094" y2="1582.8906"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="866.5" x2="866.5" y1="254.3203" y2="1582.8906"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1018.5" x2="1018.5" y1="89.6094" y2="1582.8906"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1326" x2="1326" y1="89.6094" y2="1582.8906"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1485" x2="1485" y1="89.6094" y2="1582.8906"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2105" x2="2105" y1="639.0938" y2="1582.8906"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2308" x2="2308" y1="89.6094" y2="1582.8906"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2693" x2="2693" y1="1328.1797" y2="1582.8906"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2862" x2="2862" y1="729.0547" y2="1582.8906"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="3001" x2="3001" y1="89.6094" y2="1582.8906"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="3150" x2="3150" y1="89.6094" y2="1582.8906"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="3277" x2="3277" y1="89.6094" y2="1582.8906"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="3453" x2="3453" y1="89.6094" y2="1582.8906"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="3737" x2="3737" y1="89.6094" y2="1582.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="5" y="86.5332">Administrator</text><ellipse cx="49.5" cy="15" fill="#FEFECE" filter="url(#f14az5zietu1gt)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M49.5,23 L49.5,50 M36.5,31 L62.5,31 M49.5,50 L36.5,65 M49.5,50 L62.5,65 " fill="none" filter="url(#f14az5zietu1gt)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="5" y="1596.4238">Administrator</text><ellipse cx="49.5" cy="1609.5" fill="#FEFECE" filter="url(#f14az5zietu1gt)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M49.5,1617.5 L49.5,1644.5 M36.5,1625.5 L62.5,1625.5 M49.5,1644.5 L36.5,1659.5 M49.5,1644.5 L62.5,1659.5 " fill="none" filter="url(#f14az5zietu1gt)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f14az5zietu1gt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="166" x="181.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152" x="188.5" y="74.5332">:UploadUsersFromFileUI</text><rect fill="#FEFECE" filter="url(#f14az5zietu1gt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="166" x="181.5" y="1581.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152" x="188.5" y="1603.4238">:UploadUsersFromFileUI</text><rect fill="#FEFECE" filter="url(#f14az5zietu1gt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="216" x="455.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="202" x="462.5" y="74.5332">:UploadUsersFromFileController</text><rect fill="#FEFECE" filter="url(#f14az5zietu1gt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="216" x="455.5" y="1581.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="202" x="462.5" y="1603.4238">:UploadUsersFromFileController</text><rect fill="#FEFECE" filter="url(#f14az5zietu1gt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="124" x="802.5" y="1581.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="809.5" y="1603.4238">csvR:CSVReader</text><rect fill="#FEFECE" filter="url(#f14az5zietu1gt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="153" x="940.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="947.5" y="74.5332">userSt :SNSUserStore</text><rect fill="#FEFECE" filter="url(#f14az5zietu1gt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="153" x="940.5" y="1581.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="947.5" y="1603.4238">userSt :SNSUserStore</text><rect fill="#FEFECE" filter="url(#f14az5zietu1gt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="116" x="1266" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="1273" y="74.5332">comp :Company</text><rect fill="#FEFECE" filter="url(#f14az5zietu1gt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="116" x="1266" y="1581.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="1273" y="1603.4238">comp :Company</text><rect fill="#FEFECE" filter="url(#f14az5zietu1gt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="174" x="1396" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160" x="1403" y="74.5332">mapper: SNSUserMapper</text><rect fill="#FEFECE" filter="url(#f14az5zietu1gt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="174" x="1396" y="1581.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160" x="1403" y="1603.4238">mapper: SNSUserMapper</text><rect fill="#FEFECE" filter="url(#f14az5zietu1gt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="128" x="2039" y="1581.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="2046" y="1603.4238">dto: SNSUserDTO</text><rect fill="#FEFECE" filter="url(#f14az5zietu1gt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="250" x="2181" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="236" x="2188" y="74.5332">mapper: SNSUserRegisterInfoMapper</text><rect fill="#FEFECE" filter="url(#f14az5zietu1gt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="250" x="2181" y="1581.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="236" x="2188" y="1603.4238">mapper: SNSUserRegisterInfoMapper</text><rect fill="#FEFECE" filter="url(#f14az5zietu1gt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="204" x="2589" y="1581.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="190" x="2596" y="1603.4238">dto: SNSUserRegisterInfoDTO</text><rect fill="#FEFECE" filter="url(#f14az5zietu1gt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="106" x="2807" y="1581.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="2814" y="1603.4238">user :SNSUser</text><rect fill="#FEFECE" filter="url(#f14az5zietu1gt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="144" x="2927" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="2934" y="74.5332">:PasswordGenerator</text><rect fill="#FEFECE" filter="url(#f14az5zietu1gt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="144" x="2927" y="1581.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="2934" y="1603.4238">:PasswordGenerator</text><rect fill="#FEFECE" filter="url(#f14az5zietu1gt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="127" x="3085" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="3092" y="74.5332">auth :AuthFacade</text><rect fill="#FEFECE" filter="url(#f14az5zietu1gt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="127" x="3085" y="1581.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="3092" y="1603.4238">auth :AuthFacade</text><rect fill="#FEFECE" filter="url(#f14az5zietu1gt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="98" x="3226" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="3233" y="74.5332">:EmailSender</text><rect fill="#FEFECE" filter="url(#f14az5zietu1gt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="98" x="3226" y="1581.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="3233" y="1603.4238">:EmailSender</text><rect fill="#FEFECE" filter="url(#f14az5zietu1gt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="227" x="3338" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="213" x="3345" y="74.5332">userDataList :List&lt;Array&lt;String&gt;&gt;</text><rect fill="#FEFECE" filter="url(#f14az5zietu1gt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="227" x="3338" y="1581.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="213" x="3345" y="1603.4238">userDataList :List&lt;Array&lt;String&gt;&gt;</text><rect fill="#FEFECE" filter="url(#f14az5zietu1gt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="313" x="3579" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="299" x="3586" y="74.5332">userRegisterInfoList: List&lt;UserRegisterInfoDto&gt;</text><rect fill="#FEFECE" filter="url(#f14az5zietu1gt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="313" x="3579" y="1581.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="299" x="3586" y="1603.4238">userRegisterInfoList: List&lt;UserRegisterInfoDto&gt;</text><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="1465.2813" style="stroke:#A80036;stroke-width:1.0;" width="10" x="44.5" y="99.6094"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="261.5" y="121.9609"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="107.3125" style="stroke:#A80036;stroke-width:1.0;" width="10" x="261.5" y="182.6641"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="1244.5625" style="stroke:#A80036;stroke-width:1.0;" width="10" x="261.5" y="320.3281"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="560.5" y="213.0156"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="1191.8594" style="stroke:#A80036;stroke-width:1.0;" width="10" x="560.5" y="350.6797"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="861.5" y="441.3828"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="1025.8047" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1014" y="501.7344"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="35.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1019" y="682.75"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="252.4063" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1019" y="772.7109"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1024" y="997.1172"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="457.0703" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1019" y="1070.4688"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1024" y="1432.1875"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1321" y="381.0313"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1321" y="868.4141"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1480" y="597.7891"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="211.4063" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2303" y="1105.8203"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2857" y="808.0625"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2857" y="1136.1719"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2857" y="1196.5234"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2996" y="1256.875"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="3145.5" y="928.7656"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="3145.5" y="1363.8359"/><rect fill="#FFFFFF" filter="url(#f14az5zietu1gt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="3272" y="1497.5391"/><polygon fill="#A80036" points="249.5,117.9609,259.5,121.9609,249.5,125.9609,253.5,121.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="54.5" x2="255.5" y1="121.9609" y2="121.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="61.5" y="117.1045">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="72.5" y="117.1045">asks to load users from a file</text><polygon fill="#A80036" points="65.5,148.3125,55.5,152.3125,65.5,156.3125,61.5,152.3125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="59.5" x2="265.5" y1="152.3125" y2="152.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="71.5" y="147.4561">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="82.5" y="147.4561">requests data (file path name)</text><polygon fill="#A80036" points="249.5,178.6641,259.5,182.6641,249.5,186.6641,253.5,182.6641" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="54.5" x2="255.5" y1="182.6641" y2="182.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="61.5" y="177.8076">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="72.5" y="177.8076">types requested data</text><polygon fill="#A80036" points="548.5,209.0156,558.5,213.0156,548.5,217.0156,552.5,213.0156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="271.5" x2="554.5" y1="213.0156" y2="213.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="278.5" y="208.1592">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="259" x="289.5" y="208.1592">csvReader = createCsvReader(filePathName)</text><polygon fill="#A80036" points="790.5,239.3672,800.5,243.3672,790.5,247.3672,794.5,243.3672" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="565.5" x2="796.5" y1="243.3672" y2="243.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="572.5" y="238.5107">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="583.5" y="238.5107">csvReader = create(filePathName)</text><rect fill="#FEFECE" filter="url(#f14az5zietu1gt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="124" x="802.5" y="221.0156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="809.5" y="242.5488">csvR:CSVReader</text><polygon fill="#A80036" points="65.5,285.9766,55.5,289.9766,65.5,293.9766,61.5,289.9766" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="59.5" x2="265.5" y1="289.9766" y2="289.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="71.5" y="285.1201">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="82.5" y="285.1201">asks to confirm action</text><polygon fill="#A80036" points="249.5,316.3281,259.5,320.3281,249.5,324.3281,253.5,320.3281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="54.5" x2="255.5" y1="320.3281" y2="320.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="61.5" y="315.4717">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="72.5" y="315.4717">confirms action</text><polygon fill="#A80036" points="548.5,346.6797,558.5,350.6797,548.5,354.6797,552.5,350.6797" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="271.5" x2="554.5" y1="350.6797" y2="350.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="278.5" y="345.8232">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="289.5" y="345.8232">readAndUpload()</text><polygon fill="#A80036" points="1309,377.0313,1319,381.0313,1309,385.0313,1313,381.0313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="570.5" x2="1315" y1="381.0313" y2="381.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="577.5" y="376.1748">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="588.5" y="376.1748">store = getSNSUserStore()</text><polygon fill="#A80036" points="849.5,437.3828,859.5,441.3828,849.5,445.3828,853.5,441.3828" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="570.5" x2="855.5" y1="441.3828" y2="441.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="577.5" y="436.5264">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210" x="595.5" y="436.5264">userDataList = readSNSUsersData()</text><polygon fill="#A80036" points="1002,497.7344,1012,501.7344,1002,505.7344,1006,501.7344" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="570.5" x2="1008" y1="501.7344" y2="501.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="577.5" y="496.8779">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="322" x="595.5" y="496.8779">userRegisterInfoList = registerListOfUsers(userDataList)</text><path d="M930.5,516.7344 L1003.5,516.7344 L1003.5,524.7344 L993.5,534.7344 L930.5,534.7344 L930.5,516.7344 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="1018.8047" style="stroke:#000000;stroke-width:2.0;" width="2407.5" x="930.5" y="516.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="945.5" y="531.2295">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="151" x="1018.5" y="530.1533">[for each SNSUser register]</text><path d="M1029,540.0859 L1029,566.0859 L1815,566.0859 L1815,550.0859 L1805,540.0859 L1029,540.0859 " fill="#FBFB77" filter="url(#f14az5zietu1gt)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1805,540.0859 L1805,550.0859 L1815,550.0859 L1805,540.0859 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="761" x="1035" y="558.5811">snsUserData is a string with Name, Sex, Birth Date, Address, Phone Number, E-mail, SNS User Number and Citizen Card Number.</text><polygon fill="#A80036" points="1468,593.7891,1478,597.7891,1468,601.7891,1472,597.7891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1024" x2="1474" y1="597.7891" y2="597.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1031" y="592.9326">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="1049" y="592.9326">userDto = toDto(snsUserData)</text><polygon fill="#A80036" points="2027,624.1406,2037,628.1406,2027,632.1406,2031,628.1406" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1485" x2="2033" y1="628.1406" y2="628.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1492" y="623.2842">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="507" x="1510" y="623.2842">create(citizenCard, snsNumber, name, birthDay, gender, phoneNumber, email, address)</text><rect fill="#FEFECE" filter="url(#f14az5zietu1gt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="128" x="2039" y="605.7891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="2046" y="627.3223">dto: SNSUserDTO</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1024" x2="1071" y1="669.75" y2="669.75"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1071" x2="1071" y1="669.75" y2="682.75"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1030" x2="1071" y1="682.75" y2="682.75"/><polygon fill="#A80036" points="1040,678.75,1030,682.75,1040,686.75,1036,682.75" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1036" y="664.8936">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="207" x="1054" y="664.8936">snsUser = createSNSUser(userDto)</text><polygon fill="#A80036" points="2795,714.1016,2805,718.1016,2795,722.1016,2799,718.1016" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1024" x2="2801" y1="718.1016" y2="718.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1031" y="713.2451">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="1049" y="713.2451">create(userDto)</text><rect fill="#FEFECE" filter="url(#f14az5zietu1gt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="106" x="2807" y="695.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="2814" y="717.2832">user :SNSUser</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1024" x2="1071" y1="759.7109" y2="759.7109"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1071" x2="1071" y1="759.7109" y2="772.7109"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1030" x2="1071" y1="772.7109" y2="772.7109"/><polygon fill="#A80036" points="1040,768.7109,1030,772.7109,1040,776.7109,1036,772.7109" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1036" y="754.8545">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="1054" y="754.8545">validateSNSUser(snsUser)</text><polygon fill="#A80036" points="2845,804.0625,2855,808.0625,2845,812.0625,2849,808.0625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1029" x2="2851" y1="808.0625" y2="808.0625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1036" y="803.2061">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="1054" y="803.2061">email = getEmail(snsUser)</text><polygon fill="#A80036" points="1309,864.4141,1319,868.4141,1309,872.4141,1313,868.4141" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1029" x2="1315" y1="868.4141" y2="868.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1036" y="863.5576">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="1054" y="863.5576">auth = getAuthFacade()</text><polygon fill="#A80036" points="3133.5,924.7656,3143.5,928.7656,3133.5,932.7656,3137.5,928.7656" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1029" x2="3139.5" y1="928.7656" y2="928.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1036" y="923.9092">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="1054" y="923.9092">existsUser(email)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1034" x2="1076" y1="989.1172" y2="989.1172"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1076" x2="1076" y1="989.1172" y2="1002.1172"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1035" x2="1076" y1="1002.1172" y2="1002.1172"/><polygon fill="#A80036" points="1045,998.1172,1035,1002.1172,1045,1006.1172,1041,1002.1172" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1041" y="984.2607">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="1059" y="984.2607">checkDuplicates(snsUser)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1024" x2="1071" y1="1057.4688" y2="1057.4688"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1071" x2="1071" y1="1057.4688" y2="1070.4688"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1030" x2="1071" y1="1070.4688" y2="1070.4688"/><polygon fill="#A80036" points="1040,1066.4688,1030,1070.4688,1040,1074.4688,1036,1070.4688" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1036" y="1052.6123">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="265" x="1054" y="1052.6123">userRegisterInfoDto = saveSNSUser(snsUser)</text><polygon fill="#A80036" points="2291,1101.8203,2301,1105.8203,2291,1109.8203,2295,1105.8203" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1029" x2="2297" y1="1105.8203" y2="1105.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1036" y="1100.9639">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216" x="1054" y="1100.9639">userRegisterInfoDto = toDto(snsUser)</text><polygon fill="#A80036" points="2845,1132.1719,2855,1136.1719,2845,1140.1719,2849,1136.1719" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2313" x2="2851" y1="1136.1719" y2="1136.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="2320" y="1131.3154">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="2338" y="1131.3154">name = getName()</text><polygon fill="#A80036" points="2845,1192.5234,2855,1196.5234,2845,1200.5234,2849,1196.5234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2313" x2="2851" y1="1196.5234" y2="1196.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="2320" y="1191.667">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="2338" y="1191.667">email = getEmail()</text><polygon fill="#A80036" points="2984,1252.875,2994,1256.875,2984,1260.875,2988,1256.875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2313" x2="2990" y1="1256.875" y2="1256.875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="2320" y="1252.0186">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="2338" y="1252.0186">pwd = generatePwd()</text><polygon fill="#A80036" points="2577,1313.2266,2587,1317.2266,2577,1321.2266,2581,1317.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2308" x2="2583" y1="1317.2266" y2="1317.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="2315" y="1312.3701">26</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="234" x="2333" y="1312.3701">create(name, email, pwd, "SNS_USER")</text><rect fill="#FEFECE" filter="url(#f14az5zietu1gt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="204" x="2589" y="1294.875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="190" x="2596" y="1316.4082">dto: SNSUserRegisterInfoDTO</text><polygon fill="#A80036" points="3133.5,1359.8359,3143.5,1363.8359,3133.5,1367.8359,3137.5,1363.8359" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1029" x2="3139.5" y1="1363.8359" y2="1363.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1036" y="1358.9795">27</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="222" x="1054" y="1358.9795">addUserWithRole(userRegisterInfoDto)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1034" x2="1076" y1="1424.1875" y2="1424.1875"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1076" x2="1076" y1="1424.1875" y2="1437.1875"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1035" x2="1076" y1="1437.1875" y2="1437.1875"/><polygon fill="#A80036" points="1045,1433.1875,1035,1437.1875,1045,1441.1875,1041,1437.1875" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1041" y="1419.3311">28</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="1059" y="1419.3311">addSNSUser(snsUser)</text><polygon fill="#A80036" points="3260,1493.5391,3270,1497.5391,3260,1501.5391,3264,1497.5391" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1029" x2="3266" y1="1497.5391" y2="1497.5391"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1036" y="1492.6826">29</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="1054" y="1492.6826">sendEmail(email)</text><polygon fill="#A80036" points="60.5,1560.8906,50.5,1564.8906,60.5,1568.8906,56.5,1564.8906" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="54.5" x2="265.5" y1="1564.8906" y2="1564.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="66.5" y="1560.0342">30</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="84.5" y="1560.0342">informs operation success</text><!--MD5=[51ea582abc44de72b0e123a4df495151]
@startuml
autonumber
'hide footbox
actor "Administrator" as ADM

participant ":UploadUsersFromFileUI" as UI
participant ":UploadUsersFromFileController" as CTRL
participant "csvR:CSVReader" as CSVR
participant "userSt :SNSUserStore" as USR_STR
participant "comp :Company" as COMP
participant "mapper: SNSUserMapper" as MAPPER
participant "dto: SNSUserDTO" as DTO
participant "mapper: SNSUserRegisterInfoMapper" as USER_INFO_MAPPER
participant "dto: SNSUserRegisterInfoDTO" as USER_INFO_DTO
participant "user :SNSUser" as USR
participant ":PasswordGenerator" as PWDGEN
participant "auth :AuthFacade" as AUTH
participant ":EmailSender" as EMAIl
participant "userDataList :List<Array<String>>" as LIST
participant "userRegisterInfoList: List<UserRegisterInfoDto>" as USER_INFO_LIST

activate ADM
ADM -> UI : asks to load users from a file
activate UI
UI - -> ADM : requests data (file path name)
deactivate UI

ADM -> UI : types requested data
activate UI

    UI -> CTRL : csvReader = createCsvReader(filePathName)
    activate CTRL
        CTRL -> CSVR ** : csvReader = create(filePathName)
    deactivate CTRL

UI - -> ADM : asks to confirm action
deactivate UI

ADM -> UI : confirms action
activate UI

    UI -> CTRL : readAndUpload()
    activate CTRL

        CTRL -> COMP : store = getSNSUserStore()
        activate COMP
        deactivate COMP

        CTRL -> CSVR : userDataList = readSNSUsersData()
        activate CSVR
        deactivate CSVR

        CTRL -> USR_STR : userRegisterInfoList = registerListOfUsers(userDataList)
        activate USR_STR

        loop for each SNSUser register
        note right of USR_STR
            snsUserData is a string with Name, Sex, Birth Date, Address, Phone Number, E-mail, SNS User Number and Citizen Card Number. 
        end note
            USR_STR -> MAPPER : userDto = toDto(snsUserData)
            activate MAPPER
                MAPPER -> DTO ** : create(citizenCard, snsNumber, name, birthDay, gender, phoneNumber, email, address)
            deactivate MAPPER


            USR_STR -> USR_STR : snsUser = createSNSUser(userDto)
            activate USR_STR
                USR_STR -> USR** : create(userDto)
            deactivate USR_STR

            USR_STR -> USR_STR : validateSNSUser(snsUser)
            activate USR_STR
                USR_STR -> USR : email = getEmail(snsUser)
                activate USR
                deactivate USR

                USR_STR -> COMP : auth = getAuthFacade()
                activate COMP
                deactivate COMP

                USR_STR -> AUTH : existsUser(email)
                activate AUTH
                deactivate AUTH

                USR_STR -> USR_STR : checkDuplicates(snsUser)
                activate USR_STR
            deactivate USR_STR

            deactivate USR_STR

            USR_STR -> USR_STR : userRegisterInfoDto = saveSNSUser(snsUser)
            activate USR_STR

                USR_STR -> USER_INFO_MAPPER : userRegisterInfoDto = toDto(snsUser)
                activate USER_INFO_MAPPER

                    USER_INFO_MAPPER -> USR : name = getName()
                    activate USR
                    deactivate USR

                    USER_INFO_MAPPER -> USR : email = getEmail()
                    activate USR
                    deactivate USR

                    USER_INFO_MAPPER -> PWDGEN : pwd = generatePwd()
                    activate PWDGEN
                    deactivate PWDGEN

                    USER_INFO_MAPPER -> USER_INFO_DTO ** : create(name, email, pwd, "SNS_USER")

                deactivate USER_INFO_MAPPER

            USR_STR -> AUTH : addUserWithRole(userRegisterInfoDto)
            activate AUTH
            deactivate AUTH

            USR_STR -> USR_STR : addSNSUser(snsUser)
            activate USR_STR
            deactivate USR_STR
           
            USR_STR -> EMAIl : sendEmail(email)
      
            activate EMAIl
            deactivate EMAIl

            deactivate USR_STR
        deactivate USR_STR
        end
    deactivate CTRL

UI - -> ADM : informs operation success
deactivate UI

deactivate ADM

@enduml

@startuml
autonumber
actor "Administrator" as ADM

participant ":UploadUsersFromFileUI" as UI
participant ":UploadUsersFromFileController" as CTRL
participant "csvR:CSVReader" as CSVR
participant "userSt :SNSUserStore" as USR_STR
participant "comp :Company" as COMP
participant "mapper: SNSUserMapper" as MAPPER
participant "dto: SNSUserDTO" as DTO
participant "mapper: SNSUserRegisterInfoMapper" as USER_INFO_MAPPER
participant "dto: SNSUserRegisterInfoDTO" as USER_INFO_DTO
participant "user :SNSUser" as USR
participant ":PasswordGenerator" as PWDGEN
participant "auth :AuthFacade" as AUTH
participant ":EmailSender" as EMAIl
participant "userDataList :List<Array<String>>" as LIST
participant "userRegisterInfoList: List<UserRegisterInfoDto>" as USER_INFO_LIST

activate ADM
ADM -> UI : asks to load users from a file
activate UI
UI - -> ADM : requests data (file path name)
deactivate UI

ADM -> UI : types requested data
activate UI

    UI -> CTRL : csvReader = createCsvReader(filePathName)
    activate CTRL
        CTRL -> CSVR ** : csvReader = create(filePathName)
    deactivate CTRL

UI - -> ADM : asks to confirm action
deactivate UI

ADM -> UI : confirms action
activate UI

    UI -> CTRL : readAndUpload()
    activate CTRL

        CTRL -> COMP : store = getSNSUserStore()
        activate COMP
        deactivate COMP

        CTRL -> CSVR : userDataList = readSNSUsersData()
        activate CSVR
        deactivate CSVR

        CTRL -> USR_STR : userRegisterInfoList = registerListOfUsers(userDataList)
        activate USR_STR

        loop for each SNSUser register
        note right of USR_STR
            snsUserData is a string with Name, Sex, Birth Date, Address, Phone Number, E-mail, SNS User Number and Citizen Card Number. 
        end note
            USR_STR -> MAPPER : userDto = toDto(snsUserData)
            activate MAPPER
                MAPPER -> DTO ** : create(citizenCard, snsNumber, name, birthDay, gender, phoneNumber, email, address)
            deactivate MAPPER


            USR_STR -> USR_STR : snsUser = createSNSUser(userDto)
            activate USR_STR
                USR_STR -> USR** : create(userDto)
            deactivate USR_STR

            USR_STR -> USR_STR : validateSNSUser(snsUser)
            activate USR_STR
                USR_STR -> USR : email = getEmail(snsUser)
                activate USR
                deactivate USR

                USR_STR -> COMP : auth = getAuthFacade()
                activate COMP
                deactivate COMP

                USR_STR -> AUTH : existsUser(email)
                activate AUTH
                deactivate AUTH

                USR_STR -> USR_STR : checkDuplicates(snsUser)
                activate USR_STR
            deactivate USR_STR

            deactivate USR_STR

            USR_STR -> USR_STR : userRegisterInfoDto = saveSNSUser(snsUser)
            activate USR_STR

                USR_STR -> USER_INFO_MAPPER : userRegisterInfoDto = toDto(snsUser)
                activate USER_INFO_MAPPER

                    USER_INFO_MAPPER -> USR : name = getName()
                    activate USR
                    deactivate USR

                    USER_INFO_MAPPER -> USR : email = getEmail()
                    activate USR
                    deactivate USR

                    USER_INFO_MAPPER -> PWDGEN : pwd = generatePwd()
                    activate PWDGEN
                    deactivate PWDGEN

                    USER_INFO_MAPPER -> USER_INFO_DTO ** : create(name, email, pwd, "SNS_USER")

                deactivate USER_INFO_MAPPER

            USR_STR -> AUTH : addUserWithRole(userRegisterInfoDto)
            activate AUTH
            deactivate AUTH

            USR_STR -> USR_STR : addSNSUser(snsUser)
            activate USR_STR
            deactivate USR_STR
           
            USR_STR -> EMAIl : sendEmail(email)
      
            activate EMAIl
            deactivate EMAIl

            deactivate USR_STR
        deactivate USR_STR
        end
    deactivate CTRL

UI - -> ADM : informs operation success
deactivate UI

deactivate ADM

@enduml

PlantUML version 1.2022.0(Tue Jan 11 16:16:42 WET 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>